{\rtf1\ansi\ansicpg1252\uc1 \deff0\deflang1036\deflangfe1036{\fonttbl{\f0\froman\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}{\f30\froman\fcharset238\fprq2 Times New Roman CE;}{\f31\froman\fcharset204\fprq2 Times New Roman Cyr;}
{\f33\froman\fcharset161\fprq2 Times New Roman Greek;}{\f34\froman\fcharset162\fprq2 Times New Roman Tur;}{\f35\froman\fcharset177\fprq2 Times New Roman (Hebrew);}{\f36\froman\fcharset178\fprq2 Times New Roman (Arabic);}
{\f37\froman\fcharset186\fprq2 Times New Roman Baltic;}}{\colortbl;\red0\green0\blue0;\red0\green0\blue255;\red0\green255\blue255;\red0\green255\blue0;\red255\green0\blue255;\red255\green0\blue0;\red255\green255\blue0;\red255\green255\blue255;
\red0\green0\blue128;\red0\green128\blue128;\red0\green128\blue0;\red128\green0\blue128;\red128\green0\blue0;\red128\green128\blue0;\red128\green128\blue128;\red192\green192\blue192;}{\stylesheet{
\ql \li0\ri0\widctlpar\aspalpha\aspnum\faauto\adjustright\rin0\lin0\itap0 \fs24\lang1036\langfe1036\cgrid\langnp1036\langfenp1036 \snext0 Normal;}{\*\cs10 \additive Default Paragraph Font;}{\s15\ql \li0\ri0\nowidctlpar\faauto\rin0\lin0\itap0 
\fs24\lang1036\langfe1036\cgrid\langnp1036\langfenp1036 \snext15 Standard;}{\*\cs16 \additive \ul\cf2 \sbasedon10 Hyperlink;}{\s17\ql \li0\ri0\widctlpar\aspalpha\aspnum\faauto\adjustright\rin0\lin0\itap0 
\fs20\lang1036\langfe1036\cgrid\langnp1036\langfenp1036 \sbasedon0 \snext17 Body Text;}}{\info{\title (((Magazine : PC Team 67)))}{\author Belegar}{\operator Belegar}{\creatim\yr2001\mo3\dy13\hr23\min36}{\revtim\yr2001\mo3\dy20\min6}{\version35}
{\edmins498}{\nofpages2}{\nofwords1424}{\nofchars7741}{\*\company The Dwarf Company}{\nofcharsws0}{\vern8249}}\paperw11906\paperh16838\margl1417\margr1417\margt1417\margb1417 
\deftab708\widowctrl\ftnbj\aenddoc\hyphhotz425\noxlattoyen\expshrtn\noultrlspc\dntblnsbdb\nospaceforul\hyphcaps0\formshade\horzdoc\dgmargin\dghspace180\dgvspace180\dghorigin1417\dgvorigin1417\dghshow1\dgvshow1
\jexpand\viewkind1\viewscale117\viewzk2\pgbrdrhead\pgbrdrfoot\splytwnine\ftnlytwnine\htmautsp\nolnhtadjtbl\useltbaln\alntblind\lytcalctblwd\lyttblrtgr\lnbrkrule \fet0\sectd \linex0\headery708\footery708\colsx708\endnhere\sectlinegrid360\sectdefaultcl 
{\*\pnseclvl1\pnucrm\pnstart1\pnindent720\pnhang{\pntxta .}}{\*\pnseclvl2\pnucltr\pnstart1\pnindent720\pnhang{\pntxta .}}{\*\pnseclvl3\pndec\pnstart1\pnindent720\pnhang{\pntxta .}}{\*\pnseclvl4\pnlcltr\pnstart1\pnindent720\pnhang{\pntxta )}}{\*\pnseclvl5
\pndec\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl6\pnlcltr\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl7\pnlcrm\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}{\*\pnseclvl8\pnlcltr\pnstart1\pnindent720\pnhang
{\pntxtb (}{\pntxta )}}{\*\pnseclvl9\pnlcrm\pnstart1\pnindent720\pnhang{\pntxtb (}{\pntxta )}}\pard\plain \s15\ql \li0\ri0\nowidctlpar\faauto\rin0\lin0\itap0 \fs24\lang1036\langfe1036\cgrid\langnp1036\langfenp1036 {\fs20\lang1031\langfe1036\langnp1031 
(((Magazine : PC Team 68)))
\par }{\fs20 (((Rubrique: Team pratik)))
\par (((Sous Rubrique: \'e9lectronique)))
\par 
\par (((titre))) Domotique1/2 : les capteurs
\par 
\par (((chapo)))
\par Cette premi\'e8re partie consacr\'e9e \'e0 la domotique va nous initier plus particuli\'e8rement aux capteurs m\'e9t\'e9orologiques. Pour cela, l'ordinateur va nous \'eatre d'une grande aide afin de centraliser toutes les informations. 
\par 
\par (((texte)))
\par A l'\'e9vidence, la maison du futur n'est pas encore pour demain. Les constructeurs ayant du mal \'e0 s'entendre sur des normes communes, le la maison toute-automatique r\'eav\'e9e par nos parents doit encore attendre. Qu'\'e0
 cela ne tienne, nous allons automatiser nous m\'eame notre ch\'e8re demeure \'e0 l'aide de moyens relativement simples. Le but est d'effectuer certaines taches automatiquement, comme r\'e9aliser un d\'e9lestage, fermer des volets, contr\'f4ler l'\'e9
clairage d'une pi\'e8ce ou tout autre chose. Nous allons commencer ce mois-ci par apprendre \'e0 interfacer quelques capteurs qui existent sur le march\'e9. Une fois ces informations centralis\'e9
es vers notre ordinateur, il nous sera facile d'agir en cons\'e9quence sur les actionneurs.
\par }\pard\plain \ql \li0\ri0\widctlpar\aspalpha\aspnum\faauto\adjustright\rin0\lin0\itap0 \fs24\lang1036\langfe1036\cgrid\langnp1036\langfenp1036 {\fs20 
\par (((inter))) Capteur de luminosit\'e9
\par Ce capteur est d'une simplicit\'e9 enfantine : il s'agit d'une r\'e9sistance dont la valeur varie en fonction de la luminosit\'e9 re\'e7ue. Par exemple, la version pr\'e9sent\'e9e ici donne 300 Ohms pour 1000 lux, et 30K Ohms pour la luminosit\'e9
 ambiante. Il existe \'e9norm\'e9ment de versions, qui varient selon la r\'e9sistance maximale, la sensibilit\'e9, la puissance etc. Plusieurs solutions s'offrent \'e0 nous pour interfacer ce genre de capteur. La fa\'e7
on la plus souple est d'utiliser un convertisseur analogique-num\'e9rique : on a ainsi acc\'e8s \'e0 toute la plage de variation. Il y a encore d'autres m\'e9thodes comme de cr\'e9er un petit oscillateur \'e0
 l'aide d'un 74HCT14 ou d'un NE555, mais nous avons choisi une solution encore plus simple. Le montage ci-contre, un tr\'e8s classique comparateur \'e0 amplificateur op\'e9rationnel, va nous donner deux \'e9tats : pr\'e9sence de lumi\'e8re ou non. 
Cela pourra nous \'eatre utile pour allumer une lampe \'e0 partir d'une certaine obscurit\'e9 par exemple. On peut m\'eame faire un montage plus efficace en fabriquant un comparateur \'e0 hyst\'e9r\'e9
sis, qui permet de fixer les deux seuils haut et bas avec effet m\'e9moire. Il n'y a pas de meilleur montage, tout d\'e9pend de votre syst\'e8me et ce que vous voulez faire. Enfin, vous pouvez inverser les entr\'e9es de l'amplificateur op\'e9
rationnel selon la logique que vous souhaitez obtenir en sortie.
\par 
\par (((inter))) Capteur de temp\'e9rature
\par Parmi la tr\'e8s grande vari\'e9t\'e9 de capteurs dans ce domaine, nous avons choisi un composant original et tout \'e0 fait remarquable. Le plus souvent, nous avons affaire \'e0 des capteurs \'e0
 trois broches qui nous fournissent une tension analogique proportionnelle \'e0 la temp\'e9rature. L\rquote ennui est qu\rquote il faut alors faire appel \'e0 un convertisseur analogique num\'e9
rique afin de pouvoir traiter le signal par un automatisme quelconque. Le DS1620 de Dallas Semiconductor est un capteur num\'e9rique empaquet\'e9 dans un petit bo\'eetier DIL \'e0 8 broches ne n\'e9cessitant aucun composant suppl\'e9mentaire (hormis l
\rquote alimentation) pour pouvoir fonctionner. Le dialogue avec le capteur se r\'e9alise par l\rquote interm\'e9diaire de 3 fils, les donn\'e9es \'e9tant transmises en s\'e9rie. La plage de temp\'e9rature est tr\'e8s \'e9tendue, allant de \endash 55\'b0
C \'e0 +125\'b0C, en esp\'e9rant que vous n\rquote aurez jamais besoin d\rquote une telle r\'e9solution pour mesurer la temp\'e9rature ambiante de votre salon\~! Bien entendu, vous retrouverez le datasheet sur le CD. Passons au branchement\~
; nous allons utiliser la seule broche du port parall\'e8le non invers\'e9e et bidirectionnelle, la broche 16 /Init. Le deuxi\'e8me fil est l\rquote horloge et le troisi\'e8me le signal Reset\~; n\rquote importe qu\lquote 
elles autres broches en sortie feront l\rquote affaire. Comme d'habitude, nous allons utiliser Visual Basic qui se pr\'eate parfaitement \'e0 ce genre d'applications. Il est \'e9galement possible d'utiliser Visual Basic pour Applications, qui a l\rquote 
immense int\'e9r\'eat d\rquote \'eatre fourni en standard avec Microsoft Office : vous pourrez ainsi cr\'e9er de beaux graphiques, pr\'e9sentant la variation de temp\'e9rature en une journ\'e9
e par exemple. Notre application se montre assez simple, a vous de l\rquote adapter \'e0 vos besoins et de la compl\'e9ter \'e0 l'aide de la documentation fournie. Il peut \'eatre int\'e9ressant d'utiliser les sorties thermostats \'e0 programmer dans la m
\'e9moire EEPROM non volatile du DS1620. Par exemple, vous d\'e9finissez deux valeurs, haute et basse, limites pour votre syst\'e8me (des temp\'e9ratures critiques comme la temp\'e9rature d'un processeur si vous vous adonnez \'e0 l'overclocking) : d\'e8
s que la temp\'e9rature mesur\'e9
e atteint une de ces valeurs, la broche correspondante passe au niveau haut, vous donnant les moyens d'actionner n'importe quel automatisme. Enfin, le dernier (grand) avantage de ce capteur est qu'il peut fonctionner en mode autonome : plus 
besoin de votre ordinateur, pour peu que vous ayez bien programm\'e9 tous les param\'e8tres.
\par 
\par (((inter))) Capteur d'humidit\'e9
\par L\'e0 encore, il s'agit de fabriquer un petit montage adaptateur. Le capteur d'humidit\'e9 utilis\'e9 est appel\'e9 "humidistance" ; c'est un petit bo\'eetier \'e0 souder sur circuit imprim\'e9
 qui, bien qu'un peu cher - 80 F environ -, permet la mesure de l'humidit\'e9 relative au degr\'e9 d'hygrom\'e9trie ambiant. C'est en fait un simple condensateur dont la valeur varie en fonction de cette humidit\'e9 relative. N'all
ons pas chercher compliqu\'e9, encore une fois les montages les plus simples s'av\'e8rent les plus performants. C'est pour cela qu'un petit montage oscillateur \'e0
 base de 74HCT14 ou de 4011 fera parfaitement l'affaire. Au niveau de la programmation, il faut r\'e9aliser un fr\'e9quencem\'e8tre ou p\'e9riode m\'e8tre, la diff\'e9rence entre les deux est que le premier proc\'e8de \'e0
 une mesure d'impulsions pendant un certain temps tandis que le second calcule le temps entre deux fronts d'horloge. Nous rappelons que la fr\'e9quence est inversement proportionnelle \'e0 la p\'e9riode. D\'e8s lors, il s'agit de bien choisir la m\'e9
thode de mesure en fonction de la plage de fr\'e9quence mesur\'e9e ; par exemple, un fr\'e9quencem\'e8tre sera d'autant plus performant que la fr\'e9quence est grande. Le probl\'e8me est qu'il faut au pr\'e9alable faire des tests \'e0
 l'aide d'un vrai capteur d'humidit\'e9 afin d'avoir la correspondance entre le fr\'e9quence mesur\'e9e et la valeur r\'e9elle d'humidit\'e9 relative (relation qui n'est pas lin\'e9aire). Le plus simple \'e9tant de faire des essais et d'en d\'e9term
iner les valeurs \'e0 ne pas d\'e9passer, sans avoir \'e0 conna\'eetre pr\'e9cis\'e9ment la valeur d'humidit\'e9 ambiante. Le circuit pr\'e9sent\'e9 ci-contre est \'e0 base d'un circuit CMOS 4011 classique, aliment\'e9 entre 3 et 15V, et fourni une fr\'e9
quence sur la broche 4 \'e9gale \'e0 1/(R1*C1). Remplacez le condensateur C1 par le capteur d'humidit\'e9 capacitif et calculez alors la r\'e9sistance \'e0 placer en fonction de la fr\'e9quence d\'e9sir\'e9
e en sortie. A titre indicatif, sachez que le capteur utilis\'e9 ici (de Philips) poss\'e8de une capacit\'e9 de 120pF \'e0 40% d'humidit\'e9 relative. Enfin, il peut \'eatre int\'e9ressant de connecter la broche 1 du 4011 \'e0 une broche du port parall
\'e8le pour pouvoir commander l'oscillateur.
\par 
\par (((inter))) Conclusion
\par Cette petite mise en bouche sur le (vaste) th\'e8me des capteurs est loin d'\'eatre exhaustive tant les produits sont abondants dans les catalogues. Il est possible d\rquote aller beaucoup plus loin, en cr\'e9ant un v\'e9ritable r\'e9
seau de capteurs, pourquoi pas avec un dialogue par infrarouge entre le PC et les capteurs. De m\'eame, si vous poss\'e9dez une connexion illimit\'e9e \'e0 Internet, pourquoi ne pas cr\'e9er une page Web supervisant toute votre installation pour v\'e9
rifier l'\'e9tat de vos capteurs o\'f9 que vous soyez. Comme d'habitude, nous attendons vos r\'e9alisations pour les placer sur le CD. Il y a vraiment une quantit\'e9 impressionnante d\rquote applications qui peuvent \'e9
merger, en attendant le mois prochain o\'f9 nous attaquerons les actionneurs\~! 
\par 
\par }\pard\plain \s15\ql \li0\ri0\nowidctlpar\faauto\rin0\lin0\itap0 \fs24\lang1036\langfe1036\cgrid\langnp1036\langfenp1036 {\fs20 (((signature)))
\par Anthony Rabine - arabine@programmationworld.com
\par }\pard\plain \ql \li0\ri0\widctlpar\aspalpha\aspnum\faauto\adjustright\rin0\lin0\itap0 \fs24\lang1036\langfe1036\cgrid\langnp1036\langfenp1036 {\fs20 
\par }\pard\plain \s15\ql \li0\ri0\nowidctlpar\faauto\rin0\lin0\itap0 \fs24\lang1036\langfe1036\cgrid\langnp1036\langfenp1036 {\fs20 (((images)))
\par elec1.tif : Le plus simple des montages peut se r\'e9v\'e9ler tr\'e8s pratique.
\par elec2.tif : Le DS1620 seul suffit pour mesurer une temp\'e9rature.
\par elec3.tif : Un s\'e8che cheveux est pratique pour tester ce genre de montage :-)
\par elec4.tif : Le montage classique d'un oscillateur.
\par elec5.tif : Voici un capteur d'humidit\'e9.
\par 
\par (((encadr\'e9)))
\par (((titre))) Plus de place ?
\par Les ports d'entr\'e9es/sorties sont malheureusement limit\'e9s. Si votre installation devient cons\'e9quente, il vous manquera s\'fbrement des broches. Pour rem\'e9dier \'e0 ce probl\'e8me, sachez qu'il existe quelques astuces et possibilit\'e9
s fortes int\'e9ressantes. Tout d'abord, \'e0 condition de disposer d'un peu plus de mat\'e9riel, le port ISA peut fournir une solution parfaite. L'acc\'e8s au port se fait \'e0 l'aide des fonctions classiques que l'on utilise depuis d\'e9j\'e0
 quelques mois (inportb, outportb etc.). Oubliez le port PCI qui est beaucoup trop complexe \'e0 mettre en oeuvre. Les capacit\'e9s des ports parall\'e8le et s\'e9rie peuvent \'eatre \'e9tendus gr\'e2ce \'e0 des "s\'e9rialiseurs" et des registres \'e0 d
\'e9calage \'e0 acc\'e8s s\'e9rie. Les 74HC165 et 74HC595, dont les datasheets sont sur le CD Pro, sont deux composants id\'e9aux pour ce genre de probl\'e8me. En outre, ils peuvent se c\'e2bler en cascade ce qui est d'autant plus int\'e9
ressant. Bref, toutes les diverses techniques de multiplexage et de conversion s\'e9rie/parall\'e8le pourront vous rendre de fiers services.
\par }}